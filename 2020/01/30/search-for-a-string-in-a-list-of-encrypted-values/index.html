<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><style type=text/css>body{font-family:monospace}</style><title>Search for a String in a list of Encrypted Values</title><link rel=stylesheet href=/css/style.css></head><body><header>===================<br>== <a href=/>Nathan's Blog</a> ==<br>===================<div style=float:right>infrequent posts about things I am working on</div><br><p><nav><a href=/><b>Start</b></a>.
<a href=/family-culture/><b>Family Culture</b></a>.
<a href=/post/><b>Posts</b></a>.
<a href=/categories/><b>Categories</b></a>.
<a href=/tags/><b>Tags</b></a>.
<a href=/about/><b>About</b></a>.</nav></p></header><main><article><h1>Search for a String in a list of Encrypted Values</h1><b><time>30.01.2020 22:35</time></b><div><p>Imagine a scenario where one party wants to check whether a name they have exists in a list of names kept by the another party. But I do not want the other party to know what name I am searching. This problem may seem unrealistic but imagine a data breach where tons of personal information is leaked. You want to check whether you were impacted in the breach but do not trust the party hosting the personal information to keep your query safe. This is possible with the help of homomorphic encryption, specifically <a href=https://en.wikipedia.org/wiki/Paillier_cryptosystem>Paillier</a> encrytption.</p><p>Python provides library that will allow you to use the Paillier system, an additive <a href=https://en.wikipedia.org/wiki/Homomorphic_encryption>homomorphic cryptosystem</a>, to perform arithmetic on encrypted integers. It is called <a href=https://python-paillier.readthedocs.io/en/stable/usage.html#usage>phe</a>. So if we want to search a list of names to see whether it includes “nathan” we need to convert our python strings to binary. Once those values are converted to binary, we need to encrypt the values using a public or private key. For the purposes of this example, let’s assume I am reaching out to a service that has encrypted information and I want to check my value against their encrypted values. Once our value is encrypted with the service’s public key, we can check whether the difference between our encrypted value and the values provided by the service is equal to zero. If it is, we got a hit!</p><p>Start a python console which has access to the standard library and <code>phe</code>. <code>pip install phe</code> should work if you have not installed the library already. Follow along in your console session.</p><p>Generate the public/private keypair</p><p>Create binary versions of our strings and put them in a list. For more information on working with ascii to binary see the documentation for <a href=https://docs.python.org/3/library/binascii.html>binascii</a>.</p><p>Encrypt the values:</p><p>Now we can perform operations on encrypted values. Notice how with our list, values 0 and 1 are equal but 1 and 2 are not.</p><p>The next thing to demonstrate is search the encrypted values for a hidden value. This would likely not be decrypted client side, instead, the encrypted values would be sent back to the service and decrypted. The service would receive a bunch of encrypted numbers that did not mean anything to them. They would decrypt and return the results which could be decoded. In this example we subtract our search value from the encrypted one for simplicity’s sake. We are looking for 0 which indicates a hit.</p><p>This exercise is pretty straight forward, a toy example. The real world uses for this are still developing and research around homomorphic encryption is actively growing. Please let me know if you have any other examples of asymmetric cryptosystems in the real world, I would love to hear about them!</p></div></article></main><aside><div><div><h3>LATEST POSTS</h3></div><div><ul><li><a href=/post/2025-03-28-family-technology-use/>Family Technology Use</a></li><li><a href=/post/2022-02-10-optimize-for-loops/>Timing Execution to Help Optimize for Loops</a></li><li><a href=/post/2021-12-30-file-like-objects-in-lambda/>Working With File Like Objects in Lambda</a></li><li><a href=/post/2021-08-31-upload-pandas-df-to-s3/>Upload a Pandas Dataframe to AWS S3 With Ease</a></li><li><a href=/post/2021-08-16-moving-my-blog-to-hugo/>Moving My Personal Blog From Wordpress to Hugo</a></li></ul></div></div></aside><footer><p>&copy; 2025 <a href=/><b>Nathan's Blog</b></a>.
<a href=https://github.com/nmaynes><b>Github</b></a>.
<a href=https://twitter.com/nathanmaynes><b>Twitter</b></a>.</p></footer></body></html>